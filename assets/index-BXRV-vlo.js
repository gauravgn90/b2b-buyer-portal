import{j as e,B as V,$ as Be,T as ve,r as Oe,ai as Ue,v as Me,aj as Te,x as ze,ak as Ke,al as We,am as Ge,a3 as qe}from"./mui-5MYSBV5R.js";import{r as c}from"./reactVendor-BAhb8EbJ.js";import{u as xe}from"./lang-BFcXlKUT.js";import{B as He}from"./B3Card-DexeMvwR.js";import{bs as ye,G as ke,C as we,k as fe,a6 as me,a8 as Se,bt as $e,bo as De,u as Re,bu as Ne,W as de,a as Pe,N as Ve,bv as Je,a2 as Qe,a4 as Xe,ad as Ye,x as Ze}from"./react-setup-B89zJiq4.js";import{b as ce}from"./b3Logger-CMQiGC3f.js";import"../index.CgW3dhwJ.js";import{l as et}from"./b3Login-1VB9S_e7.js";import{c as tt}from"./login-BJsXd5Gr.js";import{l as ot}from"./config-Dwx2MMve.js";import{d as ue,t as at,B as Fe,e as st,s as nt,b as rt,g as _e,c as it}from"./config-DywBMq9e.js";import{n as ct}from"./eStyled-BQSmO2oX.js";import{u as je}from"./form-Bvi8lP6x.js";import{B as he}from"./B3CustomForm-DjrjSYXN.js";import{T as Ee,I as pe,R as Le,c as lt,s as dt,v as ut,a as mt,b as ft,d as pt,e as gt}from"./RegisteredFinish-CEwyDIot.js";import{C as ht,g as xt}from"./recaptcha-3zqe8Rc1.js";import{a as yt,c as bt}from"./users-BdTCmaEu.js";import{i as Ct}from"./lodashEs-Ck10JMnh.js";import{u as Ft}from"./router-BbCjXwHs.js";import"./eReact-DeS39u1B.js";import"./intl-CIPMD0ue.js";import"./eCache-BQInSoPa.js";import"./redux-B-shcavw.js";import"./toolkit-CHPG993j.js";import"./muiIcon-Du0m7JKT.js";import"./dateFns-CE3kB2v1.js";import"./dropzone-CHkuoC7V.js";import"./validatorRules-CTaxO-S2.js";function wt($){var Ae;const E=xe(),{handleBack:R,activeStep:O,handleNext:z}=$,[I,T]=c.useState([]),[K,X]=c.useState(""),[b,N]=c.useState(""),[_,L]=c.useState(""),[v,S]=c.useState(!1),[G,q]=c.useState(""),[D,J]=c.useState(!1),h=g=>L(g);c.useEffect(()=>{(async()=>{try{const n=await xt();n&&(S(n.isEnabledOnStorefront),q(n.siteKey))}catch(n){ce.error(n)}})()},[]),c.useEffect(()=>{_&&J(!1)},[_]);const{control:te,handleSubmit:Y,setError:oe,formState:{errors:Z}}=je({mode:"all"}),{state:ie,dispatch:A}=c.useContext(ye),{state:{blockPendingAccountOrderCreation:W}}=c.useContext(ke),{state:{portalStyle:{backgroundColor:ee="#FEF9F5"}}}=c.useContext(we),C=fe(ee),{contactInformation:B,bcContactInformation:F,passwordInformation:m=[],bcPasswordInformation:U=[],accountType:j,additionalInformation:se,bcAdditionalInformation:ne,addressBasicFields:H=[],bcAddressBasicFields:r=[],companyInformation:d=[],emailMarketingNewsletter:a}=ie,s=j==="1"?B:F,p=j==="1"?m:U,x=((Ae=p[0])==null?void 0:Ae.groupName)||"",P=j==="1"?se:ne,o=j==="1"?H:r;c.useEffect(()=>{if(j){if(s&&s.length){const g=s.find(n=>n.name==="email")||{};N((g==null?void 0:g.default)||"")}T(p)}},[B,F,j,s,p]);const y=g=>{const n={};if(n.authentication={force_password_reset:!1,new_password:g.password},n.accepts_product_review_abandoned_cart_emails=a,s&&(s.forEach(t=>{var l;const f=ue(t.name);f==="accepts_marketing_emails"?n.accepts_product_review_abandoned_cart_emails=!!((l=t==null?void 0:t.default)!=null&&l.length):t.custom||(n[f]=(t==null?void 0:t.default)||"")}),n.form_fields=[],P&&P.length&&P.forEach(t=>{n.form_fields.push({name:t.bcLabel,value:t.default})})),n.addresses=[],n.origin_channel_id=me,n.channel_ids=[me],j==="2"){const t={},f=o.filter(u=>!u.custom),l=o.filter(u=>u.custom);f&&(n.addresses={},f.forEach(u=>{u.name==="country"?t.country_code=u.default:u.name==="state"?t.state_or_province=u.default:u.name==="postalCode"?t.postal_code=u.default:u.name==="firstName"?t.first_name=u.default:u.name==="lastName"?t.last_name=u.default:t[u.name]=u.default})),t.form_fields=[],l&&l.length&&l.forEach(u=>{t.form_fields.push({name:u.bcLabel,value:u.default})}),n.addresses=[t],n.trigger_account_created_notification=!0}const k={storeHash:Se,...n};return lt(k)},M=async(g,n,k)=>{try{const t={};t.customerId=n||"",t.storeHash=Se;const l=(s||[]).filter(i=>!!i.custom);if(l.length){const i=[];l.forEach(w=>{const Q={};Q.fieldName=ue(w.name),Q.fieldValue=(w==null?void 0:w.default)||"",i.push(Q)}),t.userExtraFields=i}const u=d.filter(i=>!i.custom&&i.fieldType!=="files"),ae=d.filter(i=>!!i.custom);if(u.length&&u.forEach(i=>{t[at(ue(i.name))]=(i==null?void 0:i.default)||""}),ae.length){const i=[];ae.forEach(w=>{const Q={};Q.fieldName=ue(w.name),Q.fieldValue=(w==null?void 0:w.default)||"",i.push(Q)}),t.extraFields=i}const Ce=o.filter(i=>!i.custom)||[],le=o.filter(i=>!!i.custom)||[];if(Ce.length&&Ce.forEach(i=>{const w=ue(i.name);w==="address1"&&(t.addressLine1=i.default),w==="address2"&&(t.addressLine2=i.default),t[w]=i.default}),le.length){const i=[];le.forEach(w=>{const Q={};Q.fieldName=ue(w.name),Q.fieldValue=(w==null?void 0:w.default)||"",i.push(Q)}),t.addressExtraFields=i}return t.fileList=k,t.channelId=me,await $e(t)}catch(t){ce.error(t)}},re=async g=>{let n=[];if(g.length){g.forEach(k=>{n=k.default});try{return(await Promise.all(n.map(f=>De({file:f,type:"companyAttachedFile"})))).reduce((f,l)=>{let u=f;if(l.code===200){const ae={...l.data};ae.fileSize=ae.fileSize?"".concat(ae.fileSize):"",u=[...f,ae]}else throw l.data.errMsg||l.message||E("intl.global.fileUpload.fileUploadFailure");return u},[])}catch(k){throw ce.error(k),k}}},ge=g=>{const n=m.map(t=>{const f=t;return j==="1"&&(f.default=g[t.name]||t.default),t}),k=U.map(t=>{const f=t;return j==="2"&&(f.default=g[t.name]||t.default),t});A({type:"all",payload:{passwordInformation:n,bcPasswordInformation:k}})},be=async()=>{if(s&&s.length>0){const g=s.find(l=>l.fieldId==="field_email_marketing_newsletter"&&l.fieldType==="checkbox"),n=s.find(l=>l.fieldId==="field_first_name")||{},k=s.find(l=>l.fieldId==="field_last_name")||{},t=(g==null?void 0:g.isChecked)||!1,f=(g==null?void 0:g.default)||[];if(t&&f.length>0)try{await dt({storeHash:Se,email:b,first_name:n.default,last_name:k.default,channel_id:me||1})}catch(l){X((l==null?void 0:l.message)||l)}}},Ie=g=>{Y(async n=>{var k,t;if(n.password!==n.confirmPassword){oe("confirmPassword",{type:"manual",message:E("global.registerComplete.passwordMatchPrompt")}),oe("password",{type:"manual",message:E("global.registerComplete.passwordMatchPrompt")});return}if(v&&!_){J(!0);return}if(!D)try{A({type:"loading",payload:{isLoading:!0}});let f=!0;if(j==="2")await y(n);else{const l=d.filter(w=>w.fieldType==="files"),u=await re(l||[]),ae=await y(n),{data:Ce}=ae,le=await M(n,Ce.id,u);f=+(((t=(k=le==null?void 0:le.companyCreate)==null?void 0:k.company)==null?void 0:t.companyStatus)||"")==1}A({type:"finishInfo",payload:{submitSuccess:!0,isAutoApproval:f,blockPendingAccountOrderCreation:W}}),ge(n),await be(),z()}catch(f){X((f==null?void 0:f.message)||f)}finally{A({type:"loading",payload:{isLoading:!1}})}})(g)};return e.jsxs(V,{sx:{pl:1,pr:1,mt:2,width:"100%","& h4":{color:C},"& input, & .MuiFormControl-root .MuiTextField-root":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0"}},children:[K&&e.jsx(Be,{severity:"error",children:e.jsx(Ee,{children:K})}),e.jsxs(V,{children:[e.jsx(pe,{children:x}),I&&e.jsxs(e.Fragment,{children:[b.length>0&&e.jsx(V,{sx:{fontSize:"16px",fontWeight:400,color:"#000000",marginBottom:"10px",marginTop:"-12px",wordWrap:"break-word"},children:"Create password for ".concat(b)}),e.jsx(he,{formFields:I,errors:Z,control:te})]}),D?e.jsx(ve,{variant:"body1",sx:{color:"red",display:"flex",alignSelf:"flex-start",marginLeft:"8px",marginTop:"2px",fontSize:"13px"},children:E("login.loginText.missingCaptcha")}):"",v?e.jsx(V,{sx:{display:"flex",justifyContent:"center",marginTop:"20px"},children:e.jsx(ht,{siteKey:G,size:"normal",handleGetKey:h})}):""]}),e.jsx(Le,{handleBack:R,activeStep:O,handleNext:Ie,email:b})]})}function It($){var H,r,d;const{handleBack:E,handleNext:R,activeStep:O}=$,{state:z,dispatch:I}=c.useContext(ye),T=Re(Ne),{state:{accountLoginRegistration:K,portalStyle:{backgroundColor:X="#FEF9F5"}}}=c.useContext(we),b=fe(X),N=xe(),[_,L]=c.useState(""),{contactInformation:v,accountType:S,additionalInformation:G,bcContactInformation:q,bcAdditionalInformation:D}=z,{control:J,handleSubmit:h,getValues:te,formState:{errors:Y},setError:oe,setValue:Z}=je({mode:"onSubmit"}),ie=S==="1"?"additionalInformation":"bcAdditionalInformation",A=S==="1"?G||[]:D||[],W=v==null?void 0:v.map(a=>{const s=a;return a.fieldId==="field_email"&&S==="1"&&(s.isTip=!0,s.tipText="This email will be used to sign in to your account"),a}),ee=S==="1"?W:q||[],C=S==="1"?"contactInformation":"bcContactInformationFields",B=ee.length?(H=ee[0])==null?void 0:H.groupName:"",F=A.length?(r=A[0])==null?void 0:r.groupName:"",m=(a=!1)=>{I({type:"loading",payload:{isLoading:a}})},U=a=>{I({type:"accountType",payload:{accountType:a.target.value}})},j=((d=v==null?void 0:v.find(a=>a.fieldId==="field_email"))==null?void 0:d.name)||"email",se=async a=>{const s=S==="1";try{m(!0);const{isValid:p,userType:x,userInfo:{companyName:P=""}={}}=s?await yt({email:a,channelId:me}):await bt({email:a,channelId:me});return p?L(""):(L(N(st[x],{companyName:P||"",email:a})),oe(j,{type:"custom",message:""}),T==null||T.body.scrollIntoView(!0)),p}catch(p){return!1}finally{m(!1)}},ne=async a=>{h(async s=>{var P;if(!await se(s[j]))return;const p=ee.map(o=>{const y=o;return y.default=s[o.name]||o.default,o.fieldId==="field_email_marketing_newsletter"&&o.fieldType==="checkbox"&&(y.isChecked=s[o.name].length>0),o});try{if(m(!0),S==="1"){const o=p.filter(M=>!!M.custom),y=o.map(M=>({fieldName:Fe.decode(M.name),fieldValue:s[M.name]||M.default}));if(y.length>0){const M=await ut({extraFields:y});if(M.code!==200){const re=((P=M.data)==null?void 0:P.errMsg)||M.message||"",ge=re.split(":");if(ge.length>=2){const be=o.find(Ie=>Fe.decode(Ie.name)===ge[0]);if(be){oe(be.name,{type:"manual",message:ge[1]}),m(!1);return}}L(re),m(!1);return}}L("")}}catch(o){ce.error(o)}finally{m(!1)}let x=[];A&&(x=A.map(o=>{const y=o;return y.default=s[o.name]||o.default,o})),I({type:"all",payload:{[ie]:[...x],[C]:[...p]}}),R()})(a)};return e.jsxs(V,{sx:{pl:1,pr:1,mt:2,width:"100%"},children:[_&&e.jsx(Be,{severity:"error",children:e.jsx(Ee,{children:_})}),e.jsxs(Oe,{sx:{"& h4":{color:b}},children:[e.jsx(pe,{children:N("register.registeredAccount.accountType")}),e.jsxs(Ue,{"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:S,onChange:U,sx:{"& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label":{color:de(b,.87)},"& .MuiButtonBase-root.MuiRadio-root.MuiRadio-colorPrimary:not(.Mui-checked)":{color:de(b,.6)}},children:[K.b2b&&e.jsx(Me,{value:"1",control:e.jsx(Te,{}),label:N("register.registeredAccount.businessAccount")}),K.b2c&&e.jsx(Me,{value:"2",control:e.jsx(Te,{}),label:N("register.registeredAccount.personalAccount")})]})]}),e.jsxs(V,{sx:{"& h4":{color:b},"& input, & .MuiFormControl-root .MuiTextField-root, & .MuiTextField-root .MuiInputBase-multiline":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0"},"& .MuiButtonBase-root.MuiCheckbox-root.MuiCheckbox-colorPrimary:not(.Mui-checked)":{color:de(b,.6)},"& .MuiTypography-root.MuiTypography-body1.MuiFormControlLabel-label":{color:de(b,.87)}},children:[e.jsx(pe,{children:B}),e.jsx(he,{formFields:ee,errors:Y,control:J,getValues:te,setValue:Z})]}),e.jsx(V,{}),A&&A.length?e.jsxs(V,{sx:{"& h4":{color:b},"& .MuiFormControlLabel-label, & .MuiFormControl-root .MuiFormLabel-root:not(.Mui-focused)":{color:de(b,.87)},"& .MuiRadio-root:not(.Mui-checked)":{color:de(b,.6)}},children:[e.jsx(pe,{children:F}),e.jsx(he,{formFields:A,errors:Y,control:J,getValues:te,setValue:Z})]}):"",e.jsx(Le,{activeStep:O,handleBack:E,handleNext:ne})]})}function St($){var ne,H;const E=xe(),{handleBack:R,handleNext:O,activeStep:z}=$,{state:I,dispatch:T}=c.useContext(ye),{state:{portalStyle:{backgroundColor:K="#FEF9F5"}}}=c.useContext(we),X=fe(K),[b,N]=c.useState(""),{accountType:_="1",companyInformation:L=[],companyAttachment:v=[],addressBasicFields:S=[],bcAddressBasicFields:G=[],countryList:q=[]}=I,{control:D,handleSubmit:J,getValues:h,formState:{errors:te},setValue:Y,watch:oe,setError:Z}=je({mode:"all"}),ie=_==="1"?(ne=L[0])==null?void 0:ne.groupName:"",A=_==="1"?"addressBasicFields":"bcAddressBasicFields",W=_==="1"?S:G,ee=((H=W[0])==null?void 0:H.groupName)||"",C=c.useCallback((r,d="")=>{var p;const a=((p=q.find(x=>x.countryCode===r||x.countryName===r))==null?void 0:p.states)||[],s=W.find(x=>x.name==="state");s&&(a.length>0?(s.fieldType="dropdown",s.options=a):(s.fieldType="text",s.options=[])),Y("state",d&&r&&(a.find(x=>x.stateName===d)||a.length===0)?d:""),T({type:"stateList",payload:{stateList:a,addressBasicFields:S,bcAddressBasicFields:G,[A]:[...W]}})},[S,W,A,G,q]);c.useEffect(()=>{const r=h("country"),d=h("state");C(r,d)},[]),c.useEffect(()=>{const r=oe((d,{name:a,type:s})=>{const{country:p,state:x}=d;a==="country"&&s==="change"&&C(p,x)});return()=>r.unsubscribe()},[q,C]);const B=(r=!1)=>{T({type:"loading",payload:{isLoading:r}})},F=(r,d)=>r.map(a=>{const s=a;return s.default=d[a.name]||a.default,a}),m=()=>{const r=[...L,...v,...W].reduce((p,x)=>{const P=p;return P[x.name]=h(x.name)||x.default,p},{}),d=F(L,r),a=F(v,r),s=F(W,r);T({type:"all",payload:{companyInformation:[...d],companyAttachment:[...a],[A]:[...s]}})},U=()=>{var r;if(_==="1"){const d=h(),a=L.find(s=>s.fieldId==="field_attachments");if(!Ct(a)&&a.required&&d[a.name].length===0)return Z(a.name,{type:"required",message:E("global.validate.required",{label:(r=a.label)!=null?r:""})}),B(!1),!0}return!1},j=r=>{const d=U();J(async a=>{var s;if(!d){B(!0);try{if(_==="1"){const p=L.filter(o=>!!o.custom),x=p.map(o=>({fieldName:Fe.decode(o.name),fieldValue:a[o.name]||o.default})),P=await mt({extraFields:x});if(P.code!==200){const o=((s=P.data)==null?void 0:s.errMsg)||P.message||"",y=o.split(":");if(y.length>=2){const M=p.find(re=>Fe.decode(re.name)===y[0]);if(M){Z(M.name,{type:"manual",message:y[1]}),B(!1);return}}N(o),B(!1);return}N("")}m(),B(!1),O()}catch(p){B(!1)}}})(r)},se=()=>{m(),R()};return e.jsxs(V,{sx:{pl:1,pr:1,mt:2,width:"100%","& h4":{color:X},"& input, & .MuiFormControl-root .MuiTextField-root, & .MuiDropzoneArea-textContainer, & .MuiSelect-select.MuiSelect-filled, & .MuiTextField-root .MuiInputBase-multiline":{borderRadius:"4px",borderBottomLeftRadius:"0",borderBottomRightRadius:"0"}},children:[b&&e.jsx(Be,{severity:"error",children:e.jsx(Ee,{children:b})}),_==="1"?e.jsxs(V,{children:[e.jsx(pe,{children:ie}),e.jsx(he,{formFields:[...L],errors:te,control:D,getValues:h,setValue:Y,setError:Z})]}):null,e.jsxs(V,{children:[e.jsx(pe,{children:ee}),e.jsx(he,{formFields:W,errors:te,control:D,getValues:h,setValue:Y})]}),e.jsx(Le,{handleBack:se,handleNext:j,activeStep:z})]})}const Bt=ct(V)({"& #b3-customForm-id-name":{'& label[data-shrink="true"]':{whiteSpace:"break-spaces",minWidth:"calc(133% - 24px)",transition:"unset"},'& label[data-shrink="false"]':{whiteSpace:"break-spaces"}}});function jt($){const{activeStep:E,handleBack:R,handleNext:O,handleFinish:z}=$,I=T=>{switch(T){case 0:return e.jsx(It,{activeStep:E,handleBack:R,handleNext:O});case 1:return e.jsx(St,{activeStep:E,handleBack:R,handleNext:O});case 2:return e.jsx(wt,{activeStep:E,handleBack:R,handleNext:O});case 3:return e.jsx(ft,{activeStep:E,handleFinish:z});default:return null}};return e.jsx(Bt,{component:"div",children:I(E)})}function Et($){const{children:E,isStepOptional:R,activeStep:O,backgroundColor:z}=$,I=xe(),[T]=Pe(),K=ze(),{state:X}=c.useContext(ye),{accountType:b,submitSuccess:N,isAutoApproval:_}=X,L=Ve.get("blockPendingAccountOrderCreation")&&!_,v=I(L?"register.title.registerCompleteWarning":"register.title.registerComplete"),S=b==="1"?v:I("register.title.accountCreated"),G=fe(z);return e.jsxs(V,{component:"div",sx:{width:T?"100%":"537px",boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px",marginTop:"1rem",background:"#FFFFFF",padding:"0 0.8rem 1rem 0.8rem"},children:[e.jsx(V,{component:"h3",sx:{display:"flex",flexDirection:"row",justifyContent:"center",pt:2,fontSize:"24px",fontWeight:"400",margin:"0.5rem 0",color:G},children:N?S:I("register.title.accountRegister")}),!N&&e.jsx(Ke,{activeStep:O,sx:{"& .MuiSvgIcon-root:not(.Mui-active) .MuiStepIcon-text":{fill:fe(G)},"& .MuiSvgIcon-root.Mui-active .MuiStepIcon-text":{fill:fe(K.palette.primary.main)}},children:nt.map((q,D)=>{const J={},h={};return R(D)&&(h.optional=e.jsx(ve,{variant:"caption",children:I("register.step.optional")})),e.jsx(We,{...J,children:e.jsx(Ge,{...h,children:I(q)})},q)})}),E]})}const Lt=[1,2];function ao($){const{setOpenPage:E}=$,[R,O]=c.useState(0),z=xe(),[I]=Pe(),T=Ft(),K=Re(Ne),{state:{isCheckout:X,isCloseGotoBCHome:b,logo:N,storeName:_,registerEnabled:L}}=c.useContext(ke),{state:{isLoading:v,accountType:S,contactInformation:G=[],passwordInformation:q=[],bcPasswordInformation:D=[],bcContactInformation:J=[]},dispatch:h}=c.useContext(ye),{state:{accountLoginRegistration:te,portalStyle:{backgroundColor:Y="#FEF9F5"}}}=c.useContext(we);c.useEffect(()=>{L||T("/login")},[L]),c.useEffect(()=>{(async()=>{var B,F,m,U;try{h&&(h({type:"loading",payload:{isLoading:!0}}),h({type:"finishInfo",payload:{submitSuccess:!1}}));const j=Lt.map(o=>Xe(o)),se=await Promise.all(j),ne=(((B=se[1])==null?void 0:B.accountFormFields)||[]).map(o=>{const y=o;return rt.includes((o==null?void 0:o.fieldId)||"")&&o.groupId===4&&(y.isRequired=!0,y.visible=!0),o}),H=_e(((F=se[0])==null?void 0:F.accountFormFields)||[]),r=_e(ne||[]),{countries:d}=await Ye(),a=((m=r.address)==null?void 0:m.map(o=>{const y=o;return o.name==="country"&&(y.options=d,y.replaceOptions={label:"countryName",value:"countryName"}),o}))||[],s=((U=H.address)==null?void 0:U.map(o=>{const y=o;if(o.name==="country"){y.options=d;const M=d.find(re=>re.countryName===o.default);y.default=(M==null?void 0:M.countryCode)||o.default}return o}))||[],{b2b:p,b2c:x}=te;h&&h({type:"all",payload:{accountType:x&&!p?"2":"1",isLoading:!1,storeName:_,contactInformation:[...r.contactInformation||[]],bcContactInformation:[...H.contactInformation||[]],additionalInformation:[...r.additionalInformation||[]],bcAdditionalInformation:[...H.additionalInformation||[]],companyExtraFields:[],companyInformation:[...(r==null?void 0:r.businessDetails)||[]],companyAttachment:[...it(z)],addressBasicFields:[...a],bcAddressBasicFields:[...s],countryList:[...d],passwordInformation:[...r.password||[]],bcPasswordInformation:[...H.password||[]]}})}catch(j){ce.error(j)}})()},[]);const oe=C=>C===-1,Z=()=>{var F,m;const C=((F=(S==="1"?G:J).find(U=>U.name==="email"))==null?void 0:F.default)||"",B=((m=(S==="1"?q:D).find(U=>U.name==="password"))==null?void 0:m.default)||"";return{emailAddress:C,password:B}},ie=async()=>{O(C=>C+1)},A=()=>{O(C=>C-1)},W=()=>{h&&h({type:"all",payload:{accountType:"",isLoading:!1,storeName:"",submitSuccess:!1,contactInformation:[],additionalInformation:[],companyExtraFields:[],companyInformation:[],companyAttachment:[],addressBasicFields:[],addressExtraFields:[],countryList:[],passwordInformation:[]}})},ee=async()=>{var B;h({type:"loading",payload:{isLoading:!0}});const C=Z();if(X)try{await ot(C),window.location.reload()}catch(F){ce.error(F)}else try{const F={email:C.emailAddress,pass:C.password},{data:m}=await tt(F);if((B=m==null?void 0:m.login)!=null&&B.customer&&Ve.set("loginCustomer",{emailAddress:m.login.customer.email,phoneNumber:m.login.customer.phone,...m.login.customer}),await Ze(),W(),!et(T))return;b?window.location.href="/":T("/orders")}catch(F){ce.error(F)}h({type:"loading",payload:{isLoading:!1}})};return c.useEffect(()=>{K==null||K.body.scrollIntoView(!0)},[R]),Je(!1),e.jsx(He,{setOpenPage:E,children:e.jsx(pt,{isMobile:I,children:e.jsx(Qe,{isSpinning:v,tip:z("global.tips.loading"),transparency:"0",children:e.jsxs(V,{sx:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center"},children:[N&&e.jsx(gt,{children:e.jsx(qe,{sx:{maxWidth:"250px"},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:"".concat(N),alt:z("global.tips.registerLogo"),loading:"lazy"})})}),e.jsx(Et,{activeStep:R,isStepOptional:oe,backgroundColor:Y,children:e.jsx(jt,{activeStep:R,handleBack:A,handleNext:ie,handleFinish:ee})})]})})})})}export{ao as default};
