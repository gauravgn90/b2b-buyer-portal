System.register(["./mui-legacy-BDTphHaF.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-C2M9M2Og.js","./react-setup-legacy-Bwwh9_Jr.js","./B3Filter-legacy-cLJO6KUk.js","../index-legacy.BPYbSXo1.js","./Edit-legacy-BuM8f0CG.js","./form-legacy-CAo5v63e.js","./B3CustomForm-legacy-BVFdU8az.js","./ShoppingStatus-legacy-CDsJuyqu.js","./eStyled-legacy-D59194a7.js","./lodashEs-legacy-Da1qF4L1.js","./router-legacy-CCJEjNy7.js","./eReact-legacy-BRtOBtIF.js","./intl-legacy-DG3cM9-L.js","./eCache-legacy-BoIqTPuc.js","./redux-legacy-Dls004SH.js","./toolkit-legacy-6OFItfV5.js","./muiIcon-legacy-BXgwC5sb.js","./dateFns-legacy-DV9BM4UY.js","./dropzone-legacy-B_7NAEdu.js","./b3Logger-legacy-C5y5ZQF8.js","./B3FilterMore-legacy-CFk9nW9w.js","./B3FilterSearch-legacy-DYz9XuR_.js"],(function(e,s){"use strict";var t,i,n,a,l,o,r,c,d,p,u,h,g,m,f,x,j,y,S,L,b,B,C,w,P,k,v,E,I,z,F,O,R,A,N,V,D,_,M,q,H,U,W,$,J,T,G;return{setters:[e=>{t=e.j,i=e.o,n=e.T,a=e.B,l=e.J,o=e.ab,r=e.I},e=>{c=e.r},e=>{d=e.u},e=>{p=e.u,u=e.R,h=e._,g=e.a_,m=e.a$,f=e.bM,x=e.bN,j=e.a6,y=e.bO,S=e.bP,L=e.a5,b=e.r,B=e.aB,C=e.al,w=e.a3,P=e.aa,k=e.a,v=e.G,E=e.p,I=e.a2,z=e.ac,F=e.br,O=e.b0,R=e.b1,A=e.bQ,N=e.bR},e=>{V=e.B},null,e=>{D=e.d,_=e.a,M=e.u},e=>{q=e.u},e=>{H=e.B},e=>{U=e.g,W=e.S,$=e.a},e=>{J=e.n},e=>{T=e.i},e=>{G=e.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",(function(){const[e,i]=c.useState(!1),[n,l]=c.useState(!1),[o,r]=c.useState(null),[g,m]=c.useState([]),[f]=k(),[x]=_(),y=d(),S=p((({b2bFeatures:e})=>e.masqueradeCompany.id)),{state:{openAPPParams:b},dispatch:B}=c.useContext(v),C=p(E),w=p((({company:e})=>e.companyInfo.id)),{shoppingListActionsPermission:P,submitShoppingListPermission:D}=p(u);c.useEffect((()=>{(async()=>{const e=w||S;let s={};C&&(s=await F(+e,1));const t=$(s,D),i=JSON.parse(JSON.stringify(t));i.forEach((e=>(e.label=y(e.idLang),"status"===e.name&&e.options?.map((e=>(e.label=y(e.idLang),e))),e))),m(i)})(),b.shoppingListBtn&&B({type:"common",payload:{openAPPParams:{quoteBtn:"",shoppingListBtn:""}}})}),[]);const q=M(),H={isEnabled:!C||P,customLabel:y("shoppingLists.createNew"),customButtomStyle:{fontSize:"15px",fontWeight:"500",width:"140px",padding:"0"}},U=D?"":[0,40],W={search:"",createdBy:"",status:U,isDefault:!0},[J,T]=c.useState(W),G=c.useRef(null),Q=()=>{x.current?.refresh()},X=e=>{G.current?.handleOpenAddEditShoppingListsClick("edit",e)},K=e=>{G.current?.handleOpenAddEditShoppingListsClick("dup",e)},Y=e=>{r(e),l(!0)},Z=()=>{l(!1)};return t.jsx(I,{isSpinning:e,children:t.jsxs(a,{sx:{display:"flex",flexDirection:"column",flex:1},children:[t.jsx(V,{showB3FilterMoreIcon:C,fiterMoreInfo:g,handleChange:(e,s)=>{if("search"===e){const e={...W,search:s};T(e)}},handleFilterChange:e=>{const{status:s}=e,t=""===s||99===s?U:s,i={...W,createdBy:e.createdBy,status:t,isDefault:""===s};T(i)},customButtomConfig:H,handleFilterCustomButtomClick:()=>{G.current?.handleOpenAddEditShoppingListsClick("add")}}),t.jsx(z,{columnItems:[],ref:x,rowsPerPageOptions:[12,24,36],getRequestList:async e=>{const{edges:s,totalCount:t}=C?await O(e):await R({offset:e.offset,first:e.first,search:e.search,channelId:j});return{edges:s,totalCount:t}},searchParams:J,isCustomRender:!0,itemXs:q?3:4,requestLoading:i,renderItem:e=>t.jsx(ie,{item:e,isPermissions:!C||P,onEdit:X,onDelete:Y,onCopy:K,isB2BUser:C},e.id||"")}),t.jsx(s,{renderList:Q,ref:G,isB2BUser:C}),t.jsx(h,{isOpen:n,title:y("shoppingLists.deleteShoppingList"),leftSizeBtn:y("shoppingLists.cancel"),rightSizeBtn:y("shoppingLists.delete"),handleLeftClick:Z,handRightClick:async()=>{if(o)try{i(!0),Z();const e=o?.id||0;C?await A(e):await N(e),L.success(y("shoppingLists.deleteSuccess"))}finally{i(!1),Q()}},row:o,rightStyleBtn:{color:"#D32F2F"},isShowBordered:!1,children:t.jsx(a,{sx:{display:"flex",justifyContent:f?"center%":"start",width:f?"100%":"450px",height:"100%"},children:y("shoppingLists.confirmDelete")})})]})})}));const s=c.forwardRef((function({renderList:e,isB2BUser:s},i){const n=p(u),[a,l]=c.useState(!1),[o,r]=c.useState(""),[b,B]=c.useState(null),[C,w]=c.useState(!1),[P,k]=c.useState([]),v=d(),{control:E,handleSubmit:I,getValues:z,formState:{errors:F},clearErrors:O,setValue:R}=q({mode:"onSubmit"});c.useEffect((()=>{a&&"add"!==o&&b&&P.forEach((e=>{R(e.name,b[e.name])}))}),[b,a,R,o,P]);const A=()=>{P.forEach((e=>{R(e.name,"")})),O(),l(!1)},N=(e,s)=>{const t=U(v);k(t),s&&B(s),r(e),l(!0)};return c.useImperativeHandle(i,(()=>({handleOpenAddEditShoppingListsClick:N}))),t.jsx(h,{isOpen:a,title:v("edit"===o?"shoppingLists.edit":"add"===o?"shoppingLists.createNewShoppingList":"shoppingLists.duplicateShoppingList"),leftSizeBtn:v("shoppingLists.cancel"),rightSizeBtn:v("shoppingLists.save"),handleLeftClick:A,handRightClick:()=>{I((async t=>{w(!0);try{const i={...t};let a=s?g:m,l=v("shoppingLists.addSuccess");if("edit"===o)s?(a=f,i.status=b?.status):(a=x,i.channelId=j),i.id=b?.id||0,l=v("shoppingLists.updateSuccess");else if("dup"===o)a=s?y:S,i.sampleShoppingListId=b?.id||0,l=v("shoppingLists.duplicateSuccess");else if("add"===o)if(s){const{submitShoppingListPermission:e}=n;i.status=e?30:0}else i.channelId=j;await a(i),A(),L.success(l),e()}finally{w(!1)}}))()},loading:C,children:t.jsx(H,{formFields:P,errors:F,control:E,getValues:z,setValue:R})})}));var Q={},X=i;Object.defineProperty(Q,"__esModule",{value:!0});var K=Q.default=void 0,Y=X(b()),Z=t;K=Q.default=(0,Y.default)((0,Z.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");const ee=J("div")((()=>({display:"flex",alignItems:"center",justifyContent:"space-between"}))),se=J(n)((()=>({fontWeight:"500",paddingRight:"5px"}))),te=J(a)((()=>({display:"flex",alignItems:"center",justifyContent:"start"})));function ie(e){const{item:s,onEdit:i,onDelete:h,onCopy:g,isPermissions:m,isB2BUser:f}=e,x=d(),[j,y]=c.useState(!0),S=p((({company:e})=>e.permissions)),{submitShoppingListPermission:L,approveShoppingListPermission:b}=p(u),k=G();return c.useEffect((()=>{if(f){const e=S.find((e=>"deplicate_shopping_list"===e.code)),t=[];if(e&&!T(e)){const i=e.permissionLevel,n=s?.isOwner||!1;t.push({permissionType:"shoppingListActionsPermission",permissionLevel:1===i&&n?i:2})}const{shoppingListActionsPermission:i}=B(t);y(i)}}),[s,f]),t.jsx(l,{sx:{"& .b2b-card-content":{paddingBottom:"16px"}},children:t.jsxs(o,{className:"b2b-card-content",sx:{color:"#313440"},children:[t.jsx(n,{variant:"h5",sx:{color:"rgba(0, 0, 0, 0.87)",width:"100%",wordBreak:"break-all"},children:s.name}),t.jsxs(a,{sx:{pt:"8px",pb:"20px"},children:[f&&(L||b&&s.approvedFlag)&&t.jsx(a,{sx:{pb:"25px"},children:t.jsx(W,{status:s.status})}),t.jsx(a,{sx:{width:"100%",wordBreak:"break-all"},children:s.description}),f&&t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.createdBy")}),s.customerInfo.firstName," ",s.customerInfo.lastName]}),t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.products")}),s.products.totalCount]}),t.jsxs(te,{children:[t.jsx(se,{children:x("shoppingLists.card.lastActivity")}),`${C(s.updatedAt)}`]})]}),t.jsxs(ee,{children:[t.jsx(w,{sx:{m:"0 0 0 -8px",minWidth:0},variant:"text",onClick:()=>k(`/shoppingList/${s.id}`,{state:{from:"shoppingList"}}),children:x("shoppingLists.card.view")}),t.jsxs(a,{sx:{display:m?"block":"none"},children:[(v=s.status,!(L?30!==v&&0!==v:40===v)&&j&&t.jsx(r,{"aria-label":"edit",size:"medium",sx:{marginRight:"8px"},onClick:()=>{i(s)},children:t.jsx(D,{fontSize:"inherit"})})),t.jsx(r,{"aria-label":"duplicate",size:"medium",sx:{marginRight:"8px"},onClick:()=>{g(s)},children:t.jsx(K,{fontSize:"inherit"})}),!(e=>!!L&&20!==e&&30!==e)(s.status)&&j&&t.jsx(r,{"aria-label":"delete",size:"medium",onClick:()=>{h(s)},children:t.jsx(P,{fontSize:"inherit"})})]})]})]})},s.id);var v}}}}));
