import{j as e,B as n}from"./mui-5MYSBV5R.js";import{r as s}from"./reactVendor-BAhb8EbJ.js";import{u as y}from"./lang-BFcXlKUT.js";import{u as p,aq as j,_ as k,a5 as c}from"./react-setup-B89zJiq4.js";import"../index.CgW3dhwJ.js";import{f as v,g as I}from"./payment-D2qoSvp-.js";import{c as L,u as C}from"./router-BbCjXwHs.js";import"./eReact-DeS39u1B.js";import"./intl-CIPMD0ue.js";import"./eCache-BQInSoPa.js";import"./eStyled-BQSmO2oX.js";import"./redux-B-shcavw.js";import"./toolkit-CHPG993j.js";import"./lodashEs-Ck10JMnh.js";import"./muiIcon-Du0m7JKT.js";import"./dateFns-CE3kB2v1.js";import"./dropzone-CHkuoC7V.js";import"./b3Logger-CMQiGC3f.js";import"./b3checkout-CbVlU3jI.js";function J(){const l=p(({global:r})=>r.storeInfo.platform),f=p(({company:r})=>r.tokens.B2BToken),[u,a]=s.useState(!1),[d,g]=s.useState(!1),t=L(),x=C(),i=y();s.useEffect(()=>{(async()=>{if(a(!0),!f){g(!0),a(!1);return}if(t!=null&&t.id||c.error(i("payment.errorInvoiceCantBeBlank")),t!=null&&t.id)try{const{invoice:{openBalance:{code:o="",value:m=""}}}=await v(+t.id);(!o||!m)&&c.error(i("payment.errorOpenBalanceIsIncorrect"));const B={lineItems:[{invoiceId:+t.id,amount:m}],currency:o};await I(B,l,!0)}catch(o){c.error((o==null?void 0:o.message)||i("payment.invoiceDoesntExist"))}finally{a(!1)}})()},[l,t.id]);const h=()=>{x("/login")};return e.jsxs(n,{children:[u&&e.jsx(j,{backColor:"#FFFFFF"}),e.jsx(k,{isOpen:d,fullWidth:!0,title:"",rightSizeBtn:"ok",showLeftBtn:!1,handRightClick:h,children:e.jsx(n,{sx:{height:"200px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:e.jsxs(n,{children:[e.jsx(n,{sx:{mb:"10px"},children:i("payment.firstLoginToPay")}),e.jsx(n,{children:i("payment.clickToLandingPage")})]})})})]})}export{J as default};
