import{j as e,B as i,$ as W,a3 as te,o as _,a4 as F,a5 as L,V as oe,W as se,e as D,T as ne,x as ie,a6 as ae,a7 as E,a8 as I,a9 as re}from"./mui-5MYSBV5R.js";import{r as g}from"./reactVendor-BAhb8EbJ.js";import{u as k}from"./lang-BFcXlKUT.js";import{j as le,u as x,J as ce,a as S,G as R,K as pe,L as de,M as ue,S as xe,r as z,i as ge,N as T,O as B,P as me,Q as he,p as H,C as q,R as $,k as P,U,V as G,W as fe,X as Ce,Y as be,Z as ye,_ as je}from"./react-setup-B89zJiq4.js";import"../index.CgW3dhwJ.js";import{u as M,a as V}from"./router-BbCjXwHs.js";import{u as we,C as ve}from"./useCustomCallbacks-D2SU_LXI.js";import{b as Se}from"./b3TriggerCartNumber-BPwZgbsT.js";import{n as Be}from"./eStyled-BQSmO2oX.js";import{u as ke}from"./useBlockPendingAccountViewPrice-B1YyFb3K.js";import{a as Me,S as De,C as Fe}from"./muiIcon-Du0m7JKT.js";import"./eReact-DeS39u1B.js";import"./intl-CIPMD0ue.js";import"./eCache-BQInSoPa.js";import"./redux-B-shcavw.js";import"./toolkit-CHPG993j.js";import"./lodashEs-Ck10JMnh.js";import"./dateFns-CE3kB2v1.js";import"./dropzone-CHkuoC7V.js";import"./b3Logger-CMQiGC3f.js";const Le=[0,1,2];function K(){const a=k(),[n,r]=g.useState(!1),[t,l]=le("sf-isCloseCompanyCredit",!1,sessionStorage),c=x(({company:d})=>d.customer.role),s=x(({b2bFeatures:d})=>d.masqueradeCompany.isAgenting);g.useEffect(()=>{(async()=>{if(!t&&(Le.includes(+c)||+c==3&&s)){const{companyCreditConfig:{creditHold:u,creditEnabled:h}}=await ce();r(u&&h)}})()},[c,s,t]);const o=()=>{l(!0),r(!1)};return n?e.jsx(i,{sx:{margin:"1rem 0"},children:e.jsx(W,{variant:"filled",onClose:()=>o(),severity:"warning",children:a("global.companyCredit.alert")})}):null}function Q(){const[a]=S(),n=x(({global:s})=>s.setOpenPageFn),{state:{isCloseGotoBCHome:r}}=g.useContext(R),t=M(),l=()=>{r?window.location.href="/":(t("/"),n==null||n({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")},c=a?de:ue;return e.jsx(c,{children:e.jsx(pe,{sx:{color:"#757371"},onClick:l})})}function X(){const{state:{logo:a}}=g.useContext(R),[n]=S();return e.jsx(i,{sx:n?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center","& img":{maxHeight:"65px"}},children:e.jsx(te,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:a||xe,alt:"logo"})})})}var A={},Ie=_;Object.defineProperty(A,"__esModule",{value:!0});var J=A.default=void 0,Te=Ie(z()),Re=e;J=A.default=(0,Te.default)((0,Re.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var N={},Pe=_;Object.defineProperty(N,"__esModule",{value:!0});var Y=N.default=void 0,Ae=Pe(z()),Ne=e;Y=N.default=(0,Ae.default)((0,Ne.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function Oe({width:a,list:n,config:r,title:t,value:l,handleItemClick:c}){const[s]=S(),[o,d]=g.useState(!1),u=g.useRef(null),h=k(),C=()=>{d(!1)},b=(r==null?void 0:r.name)||"name";return e.jsxs(i,{sx:{width:a||"auto"},children:[e.jsxs(F,{ref:u,onClick:()=>d(!0),sx:{pr:0},children:[e.jsx(L,{primary:t,sx:{"& span":{fontWeight:s?400:700,color:"#333333"}}}),o?e.jsx(Y,{}):e.jsx(J,{})]}),e.jsx(oe,{anchorEl:u.current,open:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:C,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:s?0:"8px",pb:s?0:"8px"}},children:n.length&&n.map(f=>{const m=f[b],y=l===f.key?"#3385d6":"black";return e.jsx(se,{sx:{color:y,width:s?"auto":a||"155px"},onClick:()=>{C(),c(f)},children:h("global.button.logout")},m)})})]})}const Ee=[{name:"Log out",key:"logout",type:"button",idLang:"global.button.logout"}];function Z({closeSidebar:a}){const[n]=S(),r=x(({company:o})=>o.customer.firstName),t=x(({company:o})=>o.customer.lastName),l=M(),c=async o=>{o.key==="logout"?l("/login?loginFlag=3"):o.type==="path"&&o.key&&l(o.key),a&&a(!1)},s="".concat(r,"  ").concat(t);return e.jsx(i,{sx:{minWidth:"150px",display:"flex",justifyContent:n?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:e.jsx(Oe,{title:s,handleItemClick:c,list:Ee})})}const We=Be(i)(()=>({"& svg":{color:"#FFFFFF"}}));function _e(a){const{title:n}=a,r=ge(),t=k(),l=x(({company:v})=>v.customer.loginType),c=x(({company:v})=>v.customer.role),s=x(({company:v})=>v.companyInfo.status),o=T.get("blockPendingAccountOrderCreation"),[d]=ke(),[u,h]=g.useState(""),[C,b]=g.useState(!1),[f,m]=g.useState("success"),[y,w]=g.useState("#2E7D32"),p=()=>{r(me(he.WAITING_LOGIN)),b(!1)},j={};return+s!=0&&(j.onClose=p),g.useEffect(()=>{const v=+s==0?!0:l===1,O=c===100?!1:v;b(O),O&&(+s==0&&(o&&d&&h(t(B.pendingOrderingAndViewPriceBlocked)),o&&!d&&h(t(B.pendingOrderingBlocked)),!o&&d&&h(t(B.pendingViewPriceBlocked)),!o&&!d&&h(t(B.pendingOrderingNotBlocked)),m("info"),w("#0288D1")),+s==1&&(h(B.approvedTip),m("success"),w("#2E7D32")),+s==2&&(h(B.rejectedTip),m("warning"),w("#ED6C02")))},[o,d,s,l,c,t]),C?e.jsx(We,{sx:{mb:n?"20px":"0"},children:e.jsx(W,{...j,severity:f||"success",sx:{color:"#FFFFFF",backgroundColor:y},children:u})}):null}function ze({title:a}){const n=x(H),r=x(({company:m})=>m.customer.role),t=x(({company:m})=>m.companyInfo),l=x(({b2bFeatures:m})=>m.masqueradeCompany.companyName),c=x(({global:m})=>m.cartNumber),s=M(),o=k(),[d]=S(),{state:{portalStyle:{backgroundColor:u="#FEF9F5"}}}=g.useContext(q),{purchasabilityPermission:h}=x($),C=n?h:!0,b=P(u),f=we(ve.OnClickCartButton,(m,y)=>{y()&&(window.location.href=U)});return g.useEffect(()=>{Se()},[]),e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[e.jsx(i,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:b||"#333333"},children:+r==3&&((t==null?void 0:t.companyName)||l||o("global.B3MainHeader.superAdmin"))}),e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[r!==100&&e.jsx(Z,{}),e.jsxs(i,{sx:{marginLeft:"8px"},children:[r===100&&e.jsx(D,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{s("/login")},children:o("global.B3MainHeader.signIn")}),e.jsx(D,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:o("global.B3MainHeader.home")}),C&&e.jsxs(D,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:f,children:[o("global.B3MainHeader.cart"),c>0?e.jsx(ne,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:c}):null]})]})]})]}),a&&e.jsx(i,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:d?0:"24px",color:b},children:a}),e.jsx(_e,{title:a})]})}function ee({closeSidebar:a}){const[n]=S(),r=M(),t=V(),l=k(),{dispatch:c}=g.useContext(G),s=x(({company:p})=>p.customer.role),{state:o}=g.useContext(R),{quoteDetailHasNewMessages:d,registerEnabled:u}=o,C=ie().palette.primary.main,b=()=>{r("/register"),c({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},f=p=>{if(s===100){c({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:p.configKey==="shoppingLists"?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:u?"Register":"",saveFn:b}}});return}r(p.path),n&&a&&a(!1)},y=Ce(o).filter(j=>j.isMenuItem),w=p=>{if(t.pathname===p)return T.set("prevPath",p),!0;if(t.pathname.includes("orderDetail")){const j=T.get("prevPath")==="/company-orders"?"/company-orders":"/orders";if(p===j)return!0}return!!(t.pathname.includes("shoppingList")&&p==="/shoppingLists"||(t.pathname.includes("/quoteDetail")||t.pathname.includes("/quoteDraft"))&&p==="/quotes")};return e.jsx(ae,{sx:{width:"100%",maxWidth:360,bgcolor:"".concat(n?"background.paper":"background.default"),color:C||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:P(C)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:fe(C,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:y.map(p=>{if(p.name==="Quotes"){const{pathname:j}=t;return e.jsx(E,{disablePadding:!0,children:e.jsx(I,{badgeContent:d&&j.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:e.jsx(F,{onClick:()=>f(p),selected:w(p.path),children:e.jsx(L,{primary:l(p.idLang)})})})},p.path)}return e.jsx(E,{disablePadding:!0,children:e.jsx(F,{onClick:()=>f(p),selected:w(p.path),children:e.jsx(L,{primary:l(p.idLang)})})},p.path)})})}function He({children:a,title:n}){const r=x(H),[t,l]=g.useState(!1),c=x(({global:b})=>b.cartNumber),s=x(({b2bFeatures:b})=>b.masqueradeCompany.isAgenting),{purchasabilityPermission:o}=x($),d=r?o:!0,{state:{portalStyle:{backgroundColor:u="#FEF9F5"}}}=g.useContext(q),h=()=>{l(!0)},C=P(u);return e.jsxs(i,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[e.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[e.jsx(I,{badgeContent:0,color:"secondary",children:e.jsx(Me,{onClick:h,sx:{color:C}})}),e.jsx(X,{}),e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[d&&e.jsx(I,{badgeContent:c,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:e.jsx(De,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=U}})}),e.jsx(i,{sx:{marginLeft:"2px",height:"24px"},children:e.jsx(Q,{})})]})]}),e.jsx(i,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:C||"#263238"},children:n}),e.jsx(K,{}),e.jsx(i,{sx:{flex:1,display:"flex",paddingBottom:s?"52px":"0"},children:a}),t&&e.jsxs(i,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[e.jsxs(i,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[e.jsx(Z,{closeSidebar:l}),e.jsx(Fe,{onClick:()=>l(!1)})]}),e.jsx(ee,{closeSidebar:l})]})]})}const qe={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"};function pt({children:a}){const[n]=S(),r=re("(min-width:1775px)"),t=V(),[l,c]=g.useState(""),s=k(),o=x(({company:f})=>f.customer.emailAddress),d=x(({company:f})=>f.customer.id),{state:{globalMessageDialog:u},dispatch:h}=g.useContext(G),C=M();g.useEffect(()=>{(!o||!d)&&!be(t.pathname)&&C("/login")},[o,d,t]),g.useEffect(()=>{const f=ye.find(m=>m.path===t.pathname);if(f&&t.pathname!=="/quoteDraft"){const m=Object.entries(qe).find(([y])=>y===t.pathname);c(s(m?m[1]:f.idLang))}else c("");h({type:"common",payload:{tipMessage:{msgs:[]}}})},[t]);const b=()=>{h({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})};return e.jsxs(i,{children:[n?e.jsx(He,{title:l,children:a}):e.jsxs(i,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:r?1775:"100%",minWidth:r?1775:"100%",maxWidth:r?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[e.jsx(Q,{}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[e.jsx(X,{}),e.jsx(i,{sx:{pt:"24px"},children:e.jsx(ee,{})})]}),e.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px"},children:[e.jsx(ze,{title:l}),e.jsx(K,{}),e.jsx(i,{component:"main",sx:{mt:!n&&!l?"24px":"0"},children:a})]})]}),e.jsx(je,{isOpen:u.open,title:u.title,leftSizeBtn:u.cancelText,rightSizeBtn:u.saveText,handleLeftClick:u.cancelFn||b,handRightClick:u.saveFn,showRightBtn:!!u.saveText,children:e.jsx(i,{sx:{display:"flex",justifyContent:"".concat(n?"center":"start"),width:"".concat(n?"100%":"450px"),height:"100%"},children:u.message})})]})}export{pt as default};
