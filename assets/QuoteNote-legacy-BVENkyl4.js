System.register(["./mui-legacy-BDTphHaF.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-C2M9M2Og.js","./react-setup-legacy-Bwwh9_Jr.js","../index-legacy.BPYbSXo1.js","./QuoteStatus-legacy-CVOyzTl-.js","./eStyled-legacy-D59194a7.js","./lodashEs-legacy-Da1qF4L1.js"],(function(e,t){"use strict";var i,l,a,o,s,n,r,d,c,f,p,u,x,g,h,m,b,j,y,w,S,v,q,N,z,I,C,L,D,F,U,E,A,B,M;return{setters:[e=>{i=e.o,l=e.j,a=e.B,o=e.T,s=e.U,n=e.x,r=e.ah,d=e.J,c=e.ab,f=e.g},e=>{p=e.r},e=>{u=e.u},e=>{x=e.r,g=e.bl,h=e.bm,m=e.a2,b=e.aa,j=e.bn,y=e.a5,w=e.bo,S=e.aS,v=e.i,q=e.u,N=e.bp,z=e.bg,I=e.a,C=e.a3,L=e.p,D=e.R,F=e.ah,U=e.bq},null,e=>{E=e.q,A=e.m},e=>{B=e.n},e=>{M=e.n}],execute:function(){e({B:W,Q:function({contactInfo:e,shippingAddress:t,billingAddress:i,handleEditInfoClick:o,status:s}){const n=u(),[r]=I();return l.jsxs(le,{flexDirection:"column",xs:{boxShadow:"0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px rgba(0, 0, 0, 0.14), 0px 1px 3px rgba(0, 0, 0, 0.12)",borderRadius:"4px"},children:[l.jsxs(a,{sx:{width:"100%",display:"flex",justifyContent:"space-between",flexDirection:r?"column":"row"},children:[l.jsx(ne,{title:n("quoteDraft.contactInfo.contact"),flag:"info",status:s,info:e}),l.jsx(ne,{title:n("global.quoteInfo.billing"),flag:"Billing",status:s,info:i}),l.jsx(ne,{title:n("global.quoteInfo.shipping"),flag:"Shipping",status:s,info:t})]}),o&&l.jsx(C,{sx:{mt:"10px",mb:"15px"},onClick:o,variant:"outlined",children:n("global.quoteInfo.editInfo")})]})},a:function(e){const t=u(),{quoteStatus:i,quoteNotes:s=""}=e,[n,r]=p.useState(""),[x,g]=p.useState(!1),h=q(L),m=q(D),b=!h||m.quotesActionsPermission;return p.useEffect((()=>{const e=F.getState().quoteInfo.draftQuoteInfo.note||"";r(e)}),[]),p.useEffect((()=>{F.dispatch(U(n||""))}),[n]),p.useEffect((()=>{s&&g(!0)}),[s]),l.jsx(d,{children:l.jsx(c,{sx:{p:"16px !important"},children:l.jsx(W,{title:t(i&&"Draft"===i?"global.quoteNote.message":"global.quoteNote.notes"),defaultOpen:x,children:l.jsxs(a,{sx:{padding:"16px 0"},children:[i&&"Draft"===i&&l.jsx(a,{sx:{fontSize:"16px",color:"rgba(0, 0, 0, 0.38)",mb:"16px"},children:t("global.quoteNote.messageNote")}),s?l.jsx(o,{variant:"body1",style:{whiteSpace:"pre-line",maxHeight:"400px",overflow:"auto"},children:s}):l.jsx(a,{children:b?l.jsx(f,{multiline:!0,fullWidth:!0,rows:5,value:n,onChange:e=>{r(e?.target.value||""),F.dispatch(U(e?.target.value||""))},label:t("global.quoteNote.typeMessage"),size:"small",variant:"filled",sx:{"& .MuiFormLabel-root":{color:"rgba(0, 0, 0, 0.38)"}}}):null})]})})})})},b:function(e){const{allowUpload:t=!0,defaultFileList:i=[],status:o,quoteId:s}=e,n=u(),r=v(),f=q((({company:e})=>e.customer.firstName)),x=q((({company:e})=>e.customer.lastName)),g=q((({quoteInfo:e})=>e.draftQuoteInfo)),[h]=N(),[m,b]=p.useState([]),j=p.useRef(null);p.useEffect((()=>{if(0===o){const{fileInfo:e=[]}=g||{};b("object"!=typeof e?[]:e)}else i.length&&b(i)}),[i.length,o]);const w=e=>{if(g){const t={...g,fileInfo:e};r(z(t))}};return l.jsx(d,{children:l.jsx(c,{sx:{p:"16px !important"},children:l.jsx(W,{title:n("global.quoteAttachment.title"),children:l.jsx(a,{children:l.jsx(ie,{ref:j,requestType:"b2b"!==h?"customerQuoteAttachedFile":"quoteAttachedFile",isEndLoadding:!0,fileList:m,limitUploadFn:()=>m.filter((e=>e?.title&&e.title.includes("by customer"))).length>=3&&(y.error(n("global.quoteAttachment.maxFilesMessage")),!0),onchange:async e=>{try{let t=[];if(0!==o){const i={fileName:e.fileName,fileType:e.fileType,fileUrl:e.fileUrl,fileSize:e.fileSize},{quoteAttachFileCreate:{attachFiles:l}}=await E({fileList:[{...i}],quoteId:s});i.id=l[0].id,t=[{...i,title:n("global.quoteAttachment.uploadedByCustomer",{createdBy:l[0].createdBy}),hasDelete:!0},...m]}else t=[{...e,title:n("global.quoteAttachment.uploadedByCustomerWithName",{firstName:f,lastName:x}),hasDelete:!0},...m],w(t);b(t)}finally{j.current?.setUploadLoadding(!1)}},onDelete:async e=>{try{j.current?.setUploadLoadding(!0);const t=m.find((t=>t.id===e)),i=m.filter((t=>t.id!==e));0!==o&&t?await A({fileId:t?.id||"",quoteId:s}):w(i),b(i)}finally{j.current?.setUploadLoadding(!1)}},allowUpload:t})})})})})}});var t={},k=i;Object.defineProperty(t,"__esModule",{value:!0});var T=t.default=void 0,$=k(x()),O=l;T=t.default=(0,$.default)((0,O.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var R={},P=i;Object.defineProperty(R,"__esModule",{value:!0});var _=R.default=void 0,H=P(x()),Q=l;function W(e){const{children:t,title:i="",header:n,defaultOpen:r=!1,handleOnChange:d}=e,[c,f]=p.useState(r);return p.useEffect((()=>{d&&d(c)}),[d,c]),p.useEffect((()=>{r&&f(r)}),[r]),l.jsxs(a,{children:[l.jsxs(a,{onClick:()=>{f(!c)},sx:{display:"flex",justifyContent:"space-between",cursor:"pointer",alignItems:"center"},children:[n||l.jsx(o,{variant:"h5",children:i}),c?l.jsx(T,{}):l.jsx(_,{})]}),l.jsx(s,{in:c,timeout:"auto",unmountOnExit:!0,children:t})]})}_=R.default=(0,H.default)((0,Q.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var J={},G=i;Object.defineProperty(J,"__esModule",{value:!0});var K=J.default=void 0,V=G(x()),X=l;K=J.default=(0,V.default)((0,X.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help");const Y=B(a)((({style:e})=>({"& .file-upload-area":{cursor:"pointer","& .MuiDropzoneArea-textContainer":{display:"flex",alignItems:"center",color:e?.color||"#1976D2"},"& .MuiDropzoneArea-text":{order:1,textTransform:"uppercase",fontWeight:500,fontSize:"14px",lineHeight:"24px"}}}))),Z=B(a)((e=>({display:"flex",background:"true"===e.hasdelete?"rgba(25, 118, 210, 0.3)":"rgba(0, 0, 0, 0.12)",borderRadius:"18px",padding:"6px 8px",alignItems:"center",margin:"0 0 2px",color:"rgba(0, 0, 0, 0.54)","& .fileList-name-area":{display:"flex",flex:1,alignItems:"center"},"& .fileList-name":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,flexBasis:"100px",maxWidth:"200px",color:"#313440",fontSize:"14px",cursor:"pointer"}}))),ee=B(o)({marginBottom:"16px",fontSize:"10px",color:"rgba(0, 0, 0, 0.38)",padding:"0 12px",textAlign:"right",wordBreak:"break-word"}),te=B(g)((()=>({transform:"rotate(45deg)",marginRight:"5px"}))),ie=p.forwardRef((function(e,t){const i=u(),{title:s=i("global.fileUpload.addAttachment"),tips:d=i("global.fileUpload.maxFileSizeMessage"),maxFileSize:c=2097152,fileNumber:f=3,limitUploadFn:x,acceptedFiles:g=h,onchange:v=M,fileList:q=[],allowUpload:N=!0,onDelete:z=M,isEndLoadding:I=!1,requestType:C="quoteAttachedFile"}=e,L=n().palette.primary.main,[D,F]=p.useState(!1);p.useImperativeHandle(t,(()=>({setUploadLoadding:e=>F(e)})));const U=e=>e/1048576>1?`${(e/1048576).toFixed(1)}MB`:e/1024>1?`${(e/1024).toFixed(1)}KB`:`${e}B`;return l.jsx(m,{isSpinning:D,children:l.jsxs(a,{sx:{padding:"12px 0 0",width:"100%"},children:[l.jsx(a,{children:q.map(((e,t)=>l.jsxs(a,{children:[l.jsxs(Z,{hasdelete:(e?.hasDelete||"").toString(),children:[l.jsxs(a,{className:"fileList-name-area",children:[l.jsx(te,{}),l.jsx(o,{className:"fileList-name",onClick:()=>{var t;(t=e.fileUrl)&&window.open(t,"_blank")},children:e.fileName})]}),e.hasDelete&&l.jsx(b,{sx:{cursor:"pointer"},onClick:()=>{z(e?.id||"")}})]}),l.jsx(ee,{children:e.title||""})]},e.id||t)))}),N&&l.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",marginTop:"10px"},children:[l.jsx(Y,{style:{color:L},children:l.jsx(j,{dropzoneClass:"file-upload-area",Icon:te,filesLimit:1,onChange:async e=>{const t=e.length>0?e[0]:null;if(!(t&&x&&x()))if(!x&&t&&q.length>=f)y.error(i("global.fileUpload.maxFileNumber",{fileNumber:f}));else if(t)try{F(!0);const{code:e,data:i,message:l}=await w({file:t,type:C});200===e?v({...i,id:S()}):y.error(l)}finally{I||F(!1)}},showPreviews:!1,showPreviewsInDropzone:!1,maxFileSize:c,showAlerts:!1,dropzoneText:s,getDropRejectMessage:(e,t,l)=>{const{size:a,type:o}=e;let s=!1;t.forEach((e=>{s=new RegExp(e).test(o)||s}));let n="";return s||(n=i("global.fileUpload.fileTypeNotSupported")),a>l&&(n=i("global.fileUpload.fileSizeExceedsLimit",{maxFileSize:U(l)})),n&&y.error(n),n},getFileLimitExceedMessage:()=>(y.error(i("global.fileUpload.fileSizeExceedsLimit",{maxFileSize:U(c)})),""),acceptedFiles:g})}),l.jsx(r,{title:d,sx:{fontSize:"20px",color:"rgba(0, 0, 0, 0.54)"},children:l.jsx(K,{})})]})]})})})),le=e("C",B("div")((({padding:e="1rem",alignItems:t="flex-start",flexDirection:i="row",backgroundColor:l="white",width:a="100%",xs:o})=>({display:"flex",flexDirection:i,alignItems:t,padding:e,width:a,backgroundColor:l,...o})))),ae=["name","email","companyName","phoneNumber","quoteTitle"],oe=["label","firstName","lastName","company","address","apartment","city","state","zipCode","country","phoneNumber"],se=["label",["firstName","lastName"],"company","address","apartment",["city","state","zipCode","country"],"phoneNumber"];function ne({flag:e,title:t,info:i,status:s}){const n="info"===e?ae:se,[r]=I(),d=u(),c="Draft"===s?`Please add ${"Billing"===e?"billing":"shipping"} address `:`No ${"Billing"===e?"billing":"shipping"} address`,f="info"!==e&&oe.some((e=>i&&!!i[e])),p="info"===e||r?0:"10px";return l.jsxs(a,{sx:{width:r?"100%":"33.3%",paddingLeft:p},children:[l.jsx(o,{sx:{fontWeight:400,fontSize:"24px",height:"32px"},children:t}),l.jsxs(a,{sx:{p:"15px 0"},children:[(f||"info"===e)&&"{}"!==JSON.stringify(i)&&n.map((e=>"quoteTitle"===e?"Draft"===s?l.jsx(o,{sx:{wordBreak:"break-all"},variant:"body1",children:`${d("quoteDraft.quoteInfo.quoteTitle")}${i[e]||""}`},e):"":"string"==typeof e?l.jsx(o,{variant:"body1",children:i&&i[e]||""},e):l.jsx(o,{variant:"body1",children:e.map(((t,l)=>l===e.length-1?i[t]||"":"firstName"===t?`${i[t]||""} `:i[t]?`${i[t]||""}, `:""))},`${e}`))),!f&&"info"!==e&&l.jsx(a,{children:c})]})]})}}}}));
